/*
 * @Author: PacificD
 * @Date: 2021-10-09 21:23:53
 * @LastEditors: PacificD
 * @LastEditTime: 2021-10-10 16:12:06
 * @Description: login tsx
 */
import { FC, ReactElement, useRef, useState } from "react";
import "./index.css"
import { loginAPI, registerAPI } from "../../api/services/userApi"
import Alert from "../Alert"
import { IErrorAlert } from "../../types/errorAlert";

interface IProps {
    isShow: boolean,
    close: () => void
}

const Login: FC<IProps> = ({
    isShow,
    close
}): ReactElement => {
    let userRef = useRef<HTMLInputElement>(null),
        passwordRef = useRef<HTMLInputElement>(null),
        formRef = useRef<HTMLDivElement>(null);

    let show = isShow ? 'flex' : 'none';

    let [error, setError] = useState<boolean>(false);
    let errorConfig = useRef<IErrorAlert>({
        msg: "这是一条消息",
        theme: "message"
    });
    let [loginMode, setLoginMode] = useState<boolean>(true);
    let timer = useRef<any>({ error: null, success: null });

    /**
     * @description: throttle timer
     * @param {IErrorAlert} config
     * @return {*}
     * @author: PacificD
     */
    const toggleAlert = (config: IErrorAlert): void => {
        //config error
        errorConfig.current = {
            msg: config.msg,
            theme: config.theme
        };

        //show alert and clear alert
        if (!timer.current.error) {
            setError(true);
            timer.current.error = setTimeout(() => {
                setError(false);
                clearTimeout(timer.current.error);
                timer.current.error = null;
            }, 3000);
        } else {
            return;
        }
    }

    //switch 1.login | 2.register
    const switchMode = (toMode: boolean) => {
        userRef.current!.value = "";
        passwordRef.current!.value = "";
        formRef.current!.className = "form animate"

        setLoginMode(toMode);
        setTimeout(() => {
            formRef.current!.className = "form static";
            setLoginMode(toMode);
        }, 500);
    }


    /**
     * @description: sumbit function
     * @param {boolean} loginMode
     * @return {*}
     * @author: PacificD
     */
    const sumbit = async (loginMode: boolean) => {
        let userName = userRef.current!.value.trim(),
            password = passwordRef.current!.value.trim();

        if (userName.length < 2 || userName.length > 16) {
            toggleAlert({
                msg: "错误！账号长度 2 ~ 16",
                theme: "error"
            });
            return;

        } else if (password.length < 6 || password.length > 16) {
            toggleAlert({
                msg: "错误！密码长度 6 ~ 16",
                theme: "error"
            });
            return;
        }

        //success -> sumbit login | register
        if (!timer.current.success) {
            if (loginMode) {
                //login
                loginAPI({
                    userName: userName,
                    password: password
                }).then(res => {
                    console.log(res);

                    switch (res.code) {
                        case 200: //success
                            toggleAlert({
                                msg: "登录成功！",
                                theme: "success"
                            });
                            //注册成功，自动登录，页面自动跳转
                            //将user信息填入sessionStorage，reducer中
                            break;
                        case 402: //user not exist
                            toggleAlert({
                                msg: "用户不存在！",
                                theme: "error"
                            });
                            break;
                        case 403: //password error
                            toggleAlert({
                                msg: "密码错误！",
                                theme: "error"
                            });
                            break;
                        default: break;
                    }
                }).catch(err => {
                    console.log(err);
                })

            } else {
                //register
                registerAPI({
                    userName: userName,
                    password: password
                }).then(res => {
                    console.log(res);
                    //注册成功，自动登录，页面自动跳转
                    //将user信息填入sessionStorage，reducer中
                })
            }
            timer.current.success = setTimeout(() => {
                clearTimeout(timer.current.success);
                timer.current.success = null;
            }, 2000);
        } else {
            return;
        }

    }

    return (
        <div className="login" style={{ display: show }}>
            {error ? <Alert msg={errorConfig.current!.msg} theme={errorConfig.current!.theme} /> : ''}
            <div className="left">
                <svg className="bg-svg" id="a27b99c7-e964-4c47-a10a-750eac27831c" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" width="855.93958" height="630.06608" viewBox="0 0 855.93958 630.06608"><path d="M935.43234,472.55767c-3.73,43.08-22.51,84.71-49.3,119.14q-1.68,2.16-3.4,4.28-3.87,4.77-7.94,9.36-4.98,5.655-10.25,11.05005-4.29,4.43994-8.78,8.68994-3.465,3.315-7.01,6.5c-28.43,25.69-61.09,46.89-94.74,65.43005-65.67,36.17-137.65,63.56995-212.52,67.56-74.86,3.98-153.01-17.46-207.91-68.52-73.99-68.81-94.63995-183.58-64.6-280.05,19.98-64.18,60.76-122.24,116.26-160.16,55.02-37.59,124.43-54.51,190.12-43.44995,52.44-31.87006,121.09-32.48,178.1-8.89,30.42,12.59,57.72,31.31,81.67,53.93a339.34337,339.34337,0,0,1,30.72,33.23q1.455,1.785,2.88,3.6,5.97,7.545,11.55,15.4,8.01,11.265,15.21,23.03c1.32,2.16,2.63,4.33,3.91,6.52.86,1.47,1.73,2.95,2.58,4.44a.29776.29776,0,0,1,.04.1c13.31,23.41,24.19,48.39,29.86005,74.5,1,4.62,1.84,9.26,2.49,13.94v.01q.855,5.955,1.29,11.97A176.97711,176.97711,0,0,1,935.43234,472.55767Z" transform="translate(-172.03021 -134.96696)" fill="#3f3d56" /><path d="M740.07386,537.68412,591.61233,414.00627,735.84027,542.638a3.44161,3.44161,0,1,0,4.23359-4.95386Z" transform="translate(-172.03021 -134.96696)" fill="#f0f0f0" opacity="0.3" /><circle cx="227.58212" cy="250.78071" r="89" fill="#f2f2f2" /><path d="M478.61233,379.74767a80.99369,80.99369,0,0,1-81,81,81.57161,81.57161,0,0,1-27.8-4.9,81.05489,81.05489,0,1,1,108.8-76.1Z" transform="translate(-172.03021 -134.96696)" fill="#fff" /><circle cx="211.58212" cy="217.78071" r="25" fill="#e4e4e4" /><path d="M475.45236,357.27764a25.00115,25.00115,0,0,1-27.6-41.08A81.05279,81.05279,0,0,1,475.45236,357.27764Z" transform="translate(-172.03021 -134.96696)" fill="#f2f2f2" /><circle cx="252.58212" cy="271.78071" r="9" fill="#e4e4e4" /><path d="M387.61233,457.74767a9.04581,9.04581,0,0,1-.31,2.34,79.52774,79.52774,0,0,1-17.49-4.24,9.00157,9.00157,0,0,1,17.8,1.9Z" transform="translate(-172.03021 -134.96696)" fill="#f2f2f2" /><path d="M334.61233,375.74767a18.002,18.002,0,0,1-16.8,17.96,81.54773,81.54773,0,0,1,1.76-35.71A18.00026,18.00026,0,0,1,334.61233,375.74767Z" transform="translate(-172.03021 -134.96696)" fill="#f2f2f2" /><circle cx="606.45653" cy="208.48305" r="3.70234" fill="#6c63ff" /><circle cx="572.30231" cy="119.94851" r="2.16307" fill="#f0f0f0" /><circle cx="225.30231" cy="543.94851" r="2.16307" fill="#f0f0f0" /><circle cx="584.58144" cy="331.59402" r="2.16307" fill="#f0f0f0" /><circle cx="305.45653" cy="350.48305" r="3.70234" fill="#6c63ff" /><circle cx="171.45653" cy="416.48305" r="17.48305" fill="#6c63ff" /><circle cx="267.30231" cy="435.94851" r="2.16307" fill="#f0f0f0" /><circle cx="487.30231" cy="97.94851" r="2.16307" fill="#f0f0f0" /><circle cx="358.30231" cy="558.94851" r="2.16307" fill="#f0f0f0" /><circle cx="326.30231" cy="117.94851" r="2.16307" fill="#f0f0f0" /><circle cx="382.30231" cy="222.94851" r="2.16307" fill="#f0f0f0" /><circle cx="296.58144" cy="480.59402" r="2.16307" fill="#f0f0f0" /><circle cx="549.58144" cy="494.59402" r="2.16307" fill="#f0f0f0" /><circle cx="437.58144" cy="368.59402" r="2.16307" fill="#f0f0f0" /><circle cx="494.58144" cy="222.59402" r="2.16307" fill="#f0f0f0" /><circle cx="598.21204" cy="292.65473" r="4.28889" fill="#ff6584" /><circle cx="424.21204" cy="150.65473" r="4.28889" fill="#ff6584" /><circle cx="424.21204" cy="445.65473" r="4.28889" fill="#ff6584" /><path d="M863.45236,605.33764a7.694,7.694,0,0,0-7.39,5.58,7.3896,7.3896,0,0,0-.3,2.12v12.04q4.485-4.24494,8.78-8.68994,5.265-5.40006,10.25-11.05005Z" transform="translate(-172.03021 -134.96696)" fill="#6c63ff" /><path d="M890.68118,667.89806q-19.36816,0-42.45654-1.46386c-79.61377-5.05567-182.7378-22.63282-290.376-49.49219-107.6377-26.85938-206.93018-59.79395-279.58545-92.73438-35.39258-16.04687-62.55615-31.23632-80.73535-45.14746-19.24707-14.72705-27.666-27.564-25.02393-38.15283,5.148-20.62891,50.731-25.14209,88.064-25.29541l.01269,3c-51.26806.21045-81.51367,8.38672-85.16552,23.022-4.65186,18.64014,33.28662,47.74073,104.08691,79.84131,72.49561,32.86817,171.60547,65.73926,279.07324,92.55664,107.46729,26.81641,210.40137,44.36328,289.83985,49.40821,77.57861,4.92773,124.74316-2.9375,129.39453-21.57813,3.86181-15.47656-21.59815-38.27539-71.68946-64.19824l1.37891-2.66406c36.397,18.83593,78.64551,45.85156,73.22168,67.58886-2.64258,10.58887-16.10547,17.96485-40.01514,21.92285C927.0762,666.7672,910.33548,667.89806,890.68118,667.89806Z" transform="translate(-172.03021 -134.96696)" fill="#6c63ff" /><circle cx="714.58212" cy="208.78071" r="100.5" fill="#fff" /><path d="M886.61233,241.74767a102,102,0,1,0,102,102A101.635,101.635,0,0,0,886.61233,241.74767Zm0,201a99,99,0,1,1,99-99A98.61767,98.61767,0,0,1,886.61233,442.74767Z" transform="translate(-172.03021 -134.96696)" fill="#2f2e41" /><path d="M798.417,367.81847a2.00078,2.00078,0,0,1-1.957-1.59765,97.66924,97.66924,0,0,1,22.34082-83.13526,2,2,0,0,1,2.98633,2.66114A93.59682,93.59682,0,0,0,800.378,365.41515a2.00228,2.00228,0,0,1-1.96094,2.40332Z" transform="translate(-172.03021 -134.96696)" fill="#2f2e41" /><circle cx="714.51924" cy="238.27373" r="63.87702" fill="#6c63ff" /><path d="M866.24805,397.35666c-4.14062-.115-9.29385-.25869-13.26384-3.15874a10.18618,10.18618,0,0,1-4.00806-7.60607,6.85213,6.85213,0,0,1,2.33007-5.62763c2.07352-1.75216,5.10139-2.16313,8.36441-1.2042l-3.38076-24.7061,2.48174-.34,3.97444,29.04518-2.07245-.951c-2.4027-1.10205-5.70088-1.66285-7.7504.06911a4.40263,4.40263,0,0,0-1.44375,3.62659,7.69887,7.69887,0,0,0,2.98246,5.67107c3.08949,2.25668,7.19708,2.54779,11.85585,2.678Z" transform="translate(-172.03021 -134.96696)" fill="#2f2e41" /><rect x="658.49493" y="222.21767" width="13.49133" height="2.50498" fill="#2f2e41" /><rect x="701.07961" y="222.21765" width="13.49133" height="2.50498" fill="#2f2e41" /><path d="M889.23233,452.90765h-57.9a8.14716,8.14716,0,0,0-8.13995,8.14v128.33a47.66955,47.66955,0,0,0,25.56,42.19995q3.555-3.18,7.01-6.5,4.485-4.24494,8.78-8.68994,5.265-5.40006,10.25-11.05005,4.08006-4.59,7.94-9.36,1.725-2.115,3.4-4.28c26.79-34.43,45.57-76.06,49.3-119.14A64.04854,64.04854,0,0,0,889.23233,452.90765Z" transform="translate(-172.03021 -134.96696)" fill="#2f2e41" /><path d="M891.34231,479.68767a14.61136,14.61136,0,0,0-10.43-4.17,14.465,14.465,0,0,0-9.16,3.36005,13.12263,13.12263,0,0,0-1.17,1.07l-47.38995,48.6-34.37,35.25a6.80061,6.80061,0,0,0-1.28,1.8,7.29573,7.29573,0,0,0-.77,3.32,7.16751,7.16751,0,0,0,2.18006,5.07l1.35,1.32,9.8,9.55.01-.01a7.29073,7.29073,0,0,0,4.66,1.63,7.167,7.167,0,0,0,5.07-2.18l1.59-1.62,11.38-11.67.38-.39,68.41-70.16a14.69128,14.69128,0,0,0-.26-20.77Z" transform="translate(-172.03021 -134.96696)" fill="#6c63ff" /><path d="M890.86152,343.44c2.1124-4.46658-.05349-9.23761-3.76378-12.09072-4.67557-3.59539-10.7221-3.00085-16.04008-1.29905-5.82238,1.8632-11.51366,5.21608-17.80383,5.02337a11.13058,11.13058,0,0,1-10.24407-7.27764c-3.3687-8.639.43561-18.29488,6.29971-24.84681a34.26766,34.26766,0,0,1,26.544-11.586,34.64989,34.64989,0,0,1,28.068,16.9026,1.54079,1.54079,0,0,0,2.05229.53813,36.88225,36.88225,0,0,1,28.39377-.71432,36.28984,36.28984,0,0,1,22.58042,34.49188c-.05,1.93122,2.95005,1.9301,3,0a39.89155,39.89155,0,0,0-10.59928-27.81249,38.71871,38.71871,0,0,0-27.56681-12.16772,39.33641,39.33641,0,0,0-17.32226,3.61223l2.05229.53813a37.69886,37.69886,0,0,0-25.0988-17.728,36.48542,36.48542,0,0,0-29.42384,7.32772c-7.70165,6.02707-13.53849,15.38016-13.17519,25.41071.15721,4.34047,1.44713,8.796,4.4606,12.03051,3.85981,4.14287,9.62229,4.85944,14.94631,3.798,7.07554-1.41071,13.53533-6.06449,20.91133-5.92113a10.21164,10.21164,0,0,1,7.6417,3.4453c1.62455,1.83335,2.6042,4.47042,1.49716,6.81122-.82094,1.73585,1.76463,3.26026,2.59041,1.51416Z" transform="translate(-172.03021 -134.96696)" fill="#2f2e41" /><path d="M412.09426,704.32287c-35.59912.001-68.69433-1.22071-98.32226-3.68555-38.72656-3.22266-69.41455-8.40332-91.21045-15.39648-23.07666-7.40528-35.31934-16.667-36.38818-27.52832-2.083-21.15821,39.334-40.72461,74.44531-53.41309l1.01953,2.82227c-48.2168,17.42382-73.957,35.28613-72.47949,50.29785,1.88183,19.11914,47.39209,33.78125,124.86181,40.22754,79.3252,6.60058,183.71729,4.26172,293.94727-6.58985,110.23-10.84863,213.07568-28.90625,289.59131-50.8457,74.72607-21.42578,116.50488-44.67969,114.623-63.79883-1.5625-15.874-33.20264-28.793-89.0918-36.3789l.40332-2.97266c40.60986,5.51172,89.47949,16.76172,91.67383,39.05762,1.06933,10.86132-9.1333,22.332-30.32276,34.09375-20.01465,11.10937-49.10351,22.17285-86.45849,32.88281-76.68506,21.98828-179.71973,40.08105-290.12451,50.94824C539.00247,700.86,472.01663,704.32287,412.09426,704.32287Z" transform="translate(-172.03021 -134.96696)" fill="#6c63ff" /><circle cx="838.45653" cy="434.48305" r="17.48305" fill="#6c63ff" /><circle cx="331.45653" cy="17.48305" r="17.48305" fill="#e6e6e6" /><circle cx="19.45653" cy="433.48305" r="17.48305" fill="#e6e6e6" /><circle cx="127.45653" cy="108.48305" r="10.70234" fill="#ff6584" /><circle cx="77.45653" cy="514.48305" r="10.70234" fill="#ff6584" /><circle cx="807.45653" cy="339.48305" r="10.70234" fill="#ff6584" /><circle cx="645.45653" cy="598.48305" r="17.48305" fill="#e6e6e6" /></svg>
                <svg className="todo-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 747.62 526">
                    <g id="Group_33" data-name="Group 33" transform="translate(-227 -187)">
                        <path id="Path_498" data-name="Path 498" d="M835.627,535.188a9.377,9.377,0,0,0-3.1-14.04l1.853-21.348-12.7-4.29-2.194,30.184a9.428,9.428,0,0,0,16.138,9.495Z" transform="translate(0.81)" fill="#ffb8b8" />
                        <path id="Path_499" data-name="Path 499" d="M672.8,514.162H661.373l-5.437-44.1h16.873Z" transform="translate(227 187)" fill="#ffb8b8" />
                        <path id="Path_500" data-name="Path 500" d="M653.207,510.894h22.048v13.882h-35.93a13.882,13.882,0,0,1,13.882-13.882Z" transform="translate(227 187)" fill="#2f2e41" />
                        <path id="Path_501" data-name="Path 501" d="M646.855,484.9l-11.1,2.728-15.806-41.523,16.385-4.027Z" transform="translate(227 187)" fill="#ffb8b8" />
                        <path id="Path_502" data-name="Path 502" d="M854.772,672.232H876.82v13.882H840.89a13.882,13.882,0,0,1,13.882-13.882Z" transform="matrix(0.971, -0.239, 0.239, 0.971, -136.446, 224.563)" fill="#2f2e41" />
                        <path id="Path_503" data-name="Path 503" d="M885.615,687.1a4.21,4.21,0,0,1-4.2-3.779L868.263,560.771l-11.447,37.476,16.213,58.533a4.225,4.225,0,0,1-2.505,5.056l-12.89,5.156a4.23,4.23,0,0,1-5.565-2.536L832.2,607.448a51.611,51.611,0,0,1-2.835-19.395l2.773-61.523,73.043,3.093-1.14,152.215a4.254,4.254,0,0,1-3.912,4.186l-14.185,1.069Q885.778,687.1,885.615,687.1Z" transform="translate(0.81)" fill="#2f2e41" />
                        <circle id="Ellipse_83" data-name="Ellipse 83" cx="24.561" cy="24.561" r="24.561" transform="translate(849.767 341.252)" fill="#ffb8b8" />
                        <path id="Path_504" data-name="Path 504" d="M891.58,533.625c-6.468,0-14.5-.529-22.817-1.076-11.36-.748-23.106-1.521-31.875-1.013a6.966,6.966,0,0,1-6.232-2.714c-9.039-11.574,4.9-56.708,5.5-58.623L847.5,419.731l.488.11-.488-.11c2.5-11.1,10.471-19.288,20.813-21.368,9.68-1.944,19.043,1.931,25.048,10.375q.478.672.955,1.379c19.552,28.957,8.493,100.9,7.752,105.539,1.033,1.237,6.618,8.232,5.083,13.091-.625,1.977-2.321,3.324-5.042,4a47.006,47.006,0,0,1-10.532.875Z" transform="translate(0.81)" fill="#6c63ff" />
                        <path id="Path_505" data-name="Path 505" d="M837.284,533.647c-2.225,0-5.226-.821-9.272-2.5-1.739-.724-7.031-2.925-.606-59.072,3.156-27.58,7.677-54.968,7.722-55.241l.043-.264.244-.11c.116-.053,11.662-5.345,13.67-12.146q.1-.353.234-.685a6.244,6.244,0,0,1,7.754-3.808,6.561,6.561,0,0,1,4.942,7.488,46.021,46.021,0,0,1-3.991,12.792c-5.433,11.21-9.114,40.928-9.15,41.227-.208,2.538-5.138,62.672-6.088,67.235-.332,1.594-.942,3.544-2.733,4.49a5.842,5.842,0,0,1-2.767.6Z" transform="translate(0.81)" fill="#2f2e41" />
                        <path id="Path_506" data-name="Path 506" d="M864.115,531.343a2.018,2.018,0,0,1-1.239-.425c-7.226-5.491,4.468-72.051,11.4-95.016,1.389-4.6,2.625-8.537,3.676-11.706h0a89.255,89.255,0,0,0,3.989-17.506c.382-3.226,1.211-5.068,2.537-5.633.921-.393,2-.126,3.22.793,6.407-.316,12.632,2.3,18.4,5.181l5.192,2.59,5.826,103.149c-.165,6.583-13.141,11.23-18.8,11.527-9.089.477-25.41,1.957-32.6,6.509a3.005,3.005,0,0,1-1.6.536Z" transform="translate(0.81)" fill="#2f2e41" />
                        <path id="Path_507" data-name="Path 507" d="M831.659,511.989c-.086,0-.172,0-.259-.008l-11.768-.724a4.229,4.229,0,0,1-3.923-4.853l5.325-35.279,10.024-49.5a8.879,8.879,0,0,1,11.362-6.709h0a8.928,8.928,0,0,1,6.108,9.879l-7.964,49.6-4.715,33.947a4.251,4.251,0,0,1-4.191,3.647Z" transform="translate(0.81)" fill="#2f2e41" />
                        <path id="Path_508" data-name="Path 508" d="M871.86,473.374a9.377,9.377,0,0,1,14.225-2.093l19.295-9.32,8.524,10.344-27.433,12.779a9.428,9.428,0,0,1-14.611-11.71Z" transform="translate(0.81)" fill="#ffb8b8" />
                        <path id="Path_509" data-name="Path 509" d="M898.664,483.383a4.232,4.232,0,0,1-4.114-3.241l-2.8-11.65a4.211,4.211,0,0,1,1.94-4.619l16.9-10.116-8.64-31.634a10.753,10.753,0,0,1,20.593-6.181l9.539,29.125a17.576,17.576,0,0,1-6.421,19.773L901.141,482.58A4.224,4.224,0,0,1,898.664,483.383Z" transform="translate(0.81)" fill="#2f2e41" />
                        <path id="Path_511" data-name="Path 511" d="M716.064,187H242.87a16.7,16.7,0,0,0-16.68,16.68V254.6a16.7,16.7,0,0,0,16.68,16.68H716.064a16.7,16.7,0,0,0,16.68-16.68V203.68A16.7,16.7,0,0,0,716.064,187Zm14.924,67.6a14.946,14.946,0,0,1-14.924,14.924H242.87A14.946,14.946,0,0,1,227.946,254.6V203.68a14.946,14.946,0,0,1,14.924-14.924H716.064a14.946,14.946,0,0,1,14.924,14.924Z" transform="translate(0.81)" fill="#3f3d56" />
                        <path id="Path_512" data-name="Path 512" d="M716.064,391.553H242.87a16.7,16.7,0,0,1-16.68-16.68V323.954a16.7,16.7,0,0,1,16.68-16.68H716.064a16.7,16.7,0,0,1,16.68,16.68v50.919a16.7,16.7,0,0,1-16.68,16.68ZM242.87,309.03a14.941,14.941,0,0,0-14.924,14.924v50.919A14.941,14.941,0,0,0,242.87,389.8H716.064a14.941,14.941,0,0,0,14.925-14.924V323.954a14.941,14.941,0,0,0-14.924-14.924Z" transform="translate(0.81)" fill="#ccc" />
                        <path id="Path_513" data-name="Path 513" d="M716.064,511.827H242.87a16.7,16.7,0,0,1-16.68-16.68V444.228a16.7,16.7,0,0,1,16.68-16.68H716.064a16.7,16.7,0,0,1,16.68,16.68v50.919a16.7,16.7,0,0,1-16.68,16.68ZM242.87,429.3a14.941,14.941,0,0,0-14.924,14.924v50.919a14.941,14.941,0,0,0,14.924,14.925H716.064a14.941,14.941,0,0,0,14.925-14.924V444.228A14.941,14.941,0,0,0,716.064,429.3Z" transform="translate(0.81)" fill="#ccc" />
                        <path id="Path_514" data-name="Path 514" d="M306.809,258.172a29.032,29.032,0,1,1,29.032-29.032,29.032,29.032,0,0,1-29.032,29.032Z" transform="translate(0.81)" fill="#6c63ff" />
                        <path id="Path_515" data-name="Path 515" d="M673.2,252.843h-309.9a7.023,7.023,0,0,1,0-14.047H673.2a7.023,7.023,0,0,1,0,14.047Z" transform="translate(0.81)" fill="#ccc" />
                        <path id="Path_516" data-name="Path 516" d="M572.235,222.994H363.293a7.023,7.023,0,1,1,0-14.047H572.235a7.023,7.023,0,0,1,0,14.047Z" transform="translate(0.81)" fill="#ccc" />
                        <path id="Path_517" data-name="Path 517" d="M306.809,378.445a29.032,29.032,0,1,1,29.032-29.032,29.032,29.032,0,0,1-29.032,29.032Z" transform="translate(0.81)" fill="#e6e6e6" />
                        <path id="Path_518" data-name="Path 518" d="M673.2,373.117h-309.9a7.023,7.023,0,1,1,0-14.047H673.2a7.023,7.023,0,0,1,0,14.047Z" transform="translate(0.81)" fill="#e6e6e6" />
                        <path id="Path_519" data-name="Path 519" d="M572.235,343.268H363.293a7.023,7.023,0,1,1,0-14.047H572.235a7.023,7.023,0,0,1,0,14.047Z" transform="translate(0.81)" fill="#e6e6e6" />
                        <path id="Path_520" data-name="Path 520" d="M306.809,498.719a29.032,29.032,0,1,1,29.032-29.032,29.032,29.032,0,0,1-29.032,29.032Z" transform="translate(0.81)" fill="#e6e6e6" />
                        <path id="Path_521" data-name="Path 521" d="M673.2,493.391h-309.9a7.023,7.023,0,1,1,0-14.047H673.2a7.023,7.023,0,1,1,0,14.047Z" transform="translate(0.81)" fill="#e6e6e6" />
                        <path id="Path_522" data-name="Path 522" d="M572.235,463.542H363.293a7.023,7.023,0,1,1,0-14.047H572.235a7.023,7.023,0,0,1,0,14.047Z" transform="translate(0.81)" fill="#e6e6e6" />
                        <path id="Path_395" data-name="Path 395" d="M305.327,239.352a3.321,3.321,0,0,1-2-.664l-.036-.027-7.525-5.756a3.344,3.344,0,1,1,4.069-5.308l4.874,3.738,11.517-15.026a3.343,3.343,0,0,1,4.686-.619h0l-.071.1.073-.1a3.347,3.347,0,0,1,.618,4.687l-13.547,17.666a3.345,3.345,0,0,1-2.66,1.3Z" transform="translate(0.81)" fill="#fff" />
                        <path id="Path_523" data-name="Path 523" d="M972.81,713h-198a1,1,0,0,1,0-2h198a1,1,0,0,1,0,2Z" transform="translate(0.81)" fill="#ccc" />
                        <path id="Path_561" data-name="Path 561" d="M782.606,412.94s-9.448-13.874-14.855-9.306-20.567,13.529-23.761,6.436,9.082-20.086,18.347-23.193,25.534-7.235,30.637,6.463a59.9,59.9,0,0,1,2.994,27.124Z" transform="matrix(0.914, 0.407, -0.407, 0.914, 336.122, -323.588)" fill="#2f2e41" />
                    </g>
                </svg>
            </div>
            <div className="right">
                <div onClick={close} className="close">
                    <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fillOpacity="0.01" /><path d="M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z" fill="none" stroke="#363636" strokeWidth="3" strokeLinejoin="round" /><path d="M29.6569 18.3431L18.3432 29.6568" stroke="#363636" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" /><path d="M18.3432 18.3431L29.6569 29.6568" stroke="#363636" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" /></svg>
                </div>
                <h1>Todo List</h1>
                <div className="switch">
                    <div onClick={() => switchMode(true)} className={loginMode ? "active" : ""}>登录</div>
                    <div onClick={() => switchMode(false)} className={loginMode ? "" : "active"}>注册</div>
                </div>
                <div className="form static" ref={formRef}>
                    <h3>用户名:</h3>
                    <div>
                        <svg className="form-icon" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fillOpacity="0.01" /><path d="M24 20C27.866 20 31 16.866 31 13C31 9.13401 27.866 6 24 6C20.134 6 17 9.13401 17 13C17 16.866 20.134 20 24 20Z" fill="none" stroke="#333" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" /><path d="M6 40.8V42H42V40.8C42 36.3196 42 34.0794 41.1281 32.3681C40.3611 30.8628 39.1372 29.6389 37.6319 28.8719C35.9206 28 33.6804 28 29.2 28H18.8C14.3196 28 12.0794 28 10.3681 28.8719C8.86278 29.6389 7.63893 30.8628 6.87195 32.3681C6 34.0794 6 36.3196 6 40.8Z" fill="none" stroke="#333" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" /></svg>
                        <input className="input userName" type="text" ref={userRef} />
                    </div>
                    <h3>密码:</h3>
                    <div>
                        <svg className="form-icon" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="48" height="48" fill="white" fillOpacity="0.01" /><rect x="6" y="22" width="36" height="22" rx="2" fill="none" stroke="#363636" strokeWidth="3" strokeLinejoin="round" /><path d="M14 22V14C14 8.47715 18.4772 4 24 4C29.5228 4 34 8.47715 34 14V22" stroke="#363636" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" /><path d="M24 30V36" stroke="#363636" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round" /></svg>
                        <input className="input password" type="password" ref={passwordRef} />
                    </div>
                    <button onClick={() => sumbit(loginMode)}
                        className={loginMode ? 'loginBtn' : 'registerBtn'}>
                        {loginMode ? '登录' : '注册'}
                    </button>
                </div>
            </div>
        </div >
    )
}

export default Login;